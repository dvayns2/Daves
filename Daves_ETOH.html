
<html>

<head>
<style>
  body {
    background-color: #efefef;
  }

  label {
    display: block;
  }
</style>
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
  <form onSubmit="return false;">
    <label>
      Drink:
      <select id="drinkType">
        <option value="Screwdriver">Screwdriver</option>
        <option value="Cider">Cider</option>
        <option value="Vodka Shot">Vodka Shot</option>
      </select>
    </label>

    <label>
      Strength:
      <input id="strength" type="text" />
    </label>

    <label>
      Minutes:
      <input id="minutes" type="text" />
    </label>

    <button id="button">Add!</button>

  </form>

  <h1>Queue:</h1>
  <ul id="queue">
  </ul>

</body>

<script type="text/javascript">
var button = document.getElementById('button');
button.addEventListener('click', onButtonClick);

// var interval=setInterval(renderDrinkQueue, 6000);
var drinkQueue = [];

function onButtonClick(event) {
  var strengthInput = document.getElementById('strength');//user strength
  var minutesInput = document.getElementById('minutes');//user minutes
  var drinkTypeInput = document.getElementById('drinkType');//user drinktype
  var initialDate = Date.now();//Date + time is initialized
  var initialTime = initialDate.toLocaleString();//get the current time
  var strength = strengthInput.value;//new var set to the strength
  var minutes = minutesInput.value;//new var set to the minutes
  var drinkType = drinkTypeInput.value;//new drinktype set to chosen drinktype

  drinkQueue.push({
    strength: strengthInput.value,
    minutes: minutesInput.value,
    drinkType: drinkTypeInput.value,
    initialDate: initialDate,
    timeRemain: initialDate,
  });

  strengthInput.value = '';
  minutesInput.value = '';
  drinkTypeInput.value = 'Screwdriver';
  renderDrinkQueue();
}

function renderDrinkQueue() {
  var queueElement = document.getElementById('queue');
  queueElement.innerHTML = '';

  drinkQueue.forEach(function(drink) {
    var strength = drink.strength;
    var minutes = drink.minutes;
    var drinkType = drink.drinkType;
    var initialDate = drink.initialDate;
    var timeRemain = drink.timeRemain;
    var timeDiff = timeRemaining(initialDate, minutes);
    var currentTime = Date.now();

    var stopbutton=document.createElement('button');
    stopbutton.setAttribute("id", "buttons")
    var text=document.createTextNode('Done');
    stopbutton.appendChild(text);
    var startbutton=document.createElement('button');
    var text2=document.createTextNode('Start');
    startbutton.appendChild(text2);
    startbutton.setAttribute("id", "button");
    var stopbutton_item=document.createElement('span');
    stopbutton_item.appendChild(stopbutton);

    startbutton.addEventListener('click', function(){
      drink.initialDate=Date.now();
      drink.timeDiff = timeRemaining(initialDate, minutes);
    });

    stopbutton.addEventListener('click', function(){
      var timeDiff = timeRemaining(initialDate, minutes);
      if(timeDiff > 0){
        drink.timeDiff="Great job!  Celebratory shot!";
        renderDrinkQueue();
      }
      else{
        drink.timeDiff="SHAME SHAME SHAME";
        renderDrinkQueue();
      }
    });

    var drinkListItem = document.createElement('li');
    drinkListItem.innerText = drinkType + ': ' + strength + ' in ' + minutes + ' minutes' + ' Time Started: ' + initialDate + ' Current time: ' + currentTime + ' ' + ' Remaining Time: ' + timeDiff + ' ';
    document.getElementById('queue').appendChild(stopbutton_item).appendChild(drinkListItem).appendChild(startbutton);
  });
}

function timeRemaining(initialDate, minutes) {
  var timeRefresh = new Date();
  var timeDiff = (Math.abs(initialDate - timeRefresh))/ 60000;
  return Math.round(minutes-timeDiff);
}
</script>
</html>

<!-- 2 problems left...how to get it so multiple drinks are not bound to the stop/start buttons and how to change it to success/fail -->